<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Life OS: Rational & Growth</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #4f2a93; /* Habitica Purple */
            --accent: #ffbe5c;  /* Gold */
            --danger: #ff6b6b;  /* Red for Anger/Cooldown */
            --success: #4caf50;
            --zen: #00bcd4;     /* Blue for Calm/Zen */
            --bg: #f4f5f7;
            --card-bg: #ffffff;
            --text-main: #333;
            --nav-height: 60px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* Space for bottom nav */
            user-select: none; /* App-like feel */
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 15px;
        }

        /* --- Header & Stats --- */
        header {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            position: sticky; top: 10px; z-index: 100;
            margin-bottom: 20px;
        }
        .header-row { display: flex; justify-content: space-between; align-items: center; }
        .app-title { font-weight: 800; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        
        .progress-container { margin-top: 10px; }
        .progress-bar-bg { background: #eee; height: 8px; border-radius: 4px; overflow: hidden; }
        .progress-fill { background: var(--success); height: 100%; width: 0%; transition: width 0.4s ease; }
        .progress-text { font-size: 0.75rem; color: #888; margin-top: 4px; text-align: right; }

        /* --- Tabs Logic --- */
        .tab-content { display: none; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Task Lists (Dashboard) --- */
        .section-header {
            font-size: 0.85rem; color: #888; text-transform: uppercase; letter-spacing: 1px;
            margin: 20px 0 10px 0; display: flex; justify-content: space-between;
        }
        
        .task-list { list-style: none; padding: 0; margin: 0; }
        .task-item {
            background: var(--card-bg); padding: 15px; margin-bottom: 10px; border-radius: 10px;
            display: flex; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border-left: 5px solid transparent; transition: all 0.2s;
        }
        .task-item.routine { border-left-color: var(--primary); }
        .task-item.todo { border-left-color: #ccc; }
        .task-item.challenge { border-left-color: var(--accent); background: #fffdf5; }
        .task-item.completed { opacity: 0.5; text-decoration: line-through; background: #f9f9f9; }

        .tag { font-size: 0.7rem; background: #eee; padding: 2px 6px; border-radius: 4px; color: #666; margin-right: 8px; }

        /* --- Quick Add Bar --- */
        .quick-add {
            display: flex; gap: 10px; background: white; padding: 10px; border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-top: 20px;
        }
        .quick-add input { flex: 1; border: none; outline: none; font-size: 1rem; }

        /* --- Gacha Page --- */
        .gacha-box { text-align: center; padding: 40px 20px; }
        .gacha-icon { font-size: 5rem; color: var(--primary); margin-bottom: 20px; animation: float 3s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        
        .gacha-btn {
            background: linear-gradient(135deg, #ffbe5c, #ff9f43); border: none; padding: 15px 40px;
            border-radius: 50px; color: white; font-weight: bold; font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(255, 190, 92, 0.4); cursor: pointer;
        }
        .gacha-btn:active { transform: scale(0.95); }

        /* --- Review Page (Improved) --- */
        .mood-selector {
            display: flex; justify-content: space-between; margin-bottom: 25px;
            background: white; padding: 15px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .mood-item {
            display: flex; flex-direction: column; align-items: center; cursor: pointer; opacity: 0.5; transition: 0.2s;
        }
        .mood-item.selected { opacity: 1; transform: scale(1.1); }
        .mood-emoji { font-size: 2rem; margin-bottom: 5px; }
        .mood-label { font-size: 0.7rem; color: #666; }

        .review-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; }
        .review-label { display: block; font-weight: bold; margin-bottom: 8px; color: var(--primary); font-size: 0.9rem; }
        .review-input {
            width: 100%; border: 1px solid #eee; border-radius: 8px; padding: 10px;
            font-family: inherit; resize: vertical; box-sizing: border-box;
        }
        .review-input:focus { outline: none; border-color: var(--primary); }

        /* --- Bottom Nav --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; height: var(--nav-height);
            background: white; display: flex; justify-content: space-around; align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05); z-index: 900;
        }
        .nav-item { text-align: center; color: #aaa; flex: 1; padding: 10px 0; cursor: pointer; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 1.4rem; display: block; margin-bottom: 2px; }
        .nav-item span { font-size: 0.7rem; }

        /* --- Modals (Cooldown & Result) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none; z-index: 2000;
            justify-content: center; align-items: center; backdrop-filter: blur(4px);
        }
        .modal { background: white; width: 85%; max-width: 400px; padding: 25px; border-radius: 15px; text-align: center; }
        
        /* Anger Mode Specifics */
        .anger-mode { border: 3px solid var(--danger); background: #fff5f5; }
        .timer-display { font-size: 3.5rem; font-weight: bold; color: var(--text-main); margin: 20px 0; font-variant-numeric: tabular-nums; }
        
        .btn { border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-primary { background: var(--primary); color: white; width: 100%; margin-top: 10px; }
        .btn-outline { background: transparent; border: 1px solid #ccc; color: #666; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="header-row">
            <div class="app-title"><i class="fas fa-cube"></i> Life OS</div>
            <button onclick="startCooldown()" class="btn btn-danger" style="padding: 6px 12px; font-size: 0.8rem;">
                <i class="fas fa-fire"></i> å†·éœæ¨¡å¼
            </button>
        </div>
        <div class="progress-container">
            <div class="progress-bar-bg">
                <div id="xp-bar" class="progress-fill"></div>
            </div>
            <div id="xp-text" class="progress-text">ä»Šæ—¥é€²åº¦: 0%</div>
        </div>
    </header>

    <div id="tab-dashboard" class="tab-content active">
        <div class="section-header">
            <span><i class="fas fa-sync"></i> æ¯æ—¥ä¿®ç…‰ (Routine)</span>
            <small onclick="switchTab('settings')" style="cursor: pointer; color: var(--primary);">è¨­å®š ></small>
        </div>
        <ul id="routine-list" class="task-list">
            </ul>

        <div class="section-header">
            <span><i class="fas fa-bolt"></i> å¾…è¾¦æ¸…å–® (To-Do)</span>
        </div>
        <ul id="todo-list" class="task-list">
            </ul>
        
        <div class="quick-add">
            <input type="text" id="quick-input" placeholder="æ–°å¢é›œé …ä»»å‹™..." onkeypress="handleEnter(event)">
            <button onclick="addTodo()" class="btn" style="color: var(--primary);"><i class="fas fa-plus"></i></button>
        </div>
    </div>

    <div id="tab-review" class="tab-content">
        <h2 style="margin-top:0; color:var(--text-main);">ğŸ“ æ¯æ—¥çµç®—</h2>
        <p style="color:#666; font-size:0.9rem; margin-bottom: 20px;">å°å­˜ä»Šæ—¥çš„æ•¸æ“šï¼Œç‚ºæ˜å¤©é‡‹æ”¾è¨˜æ†¶é«”ã€‚</p>

        <label class="review-label">ä»Šå¤©æ•´é«”çš„ç‹€æ…‹é »ç‡æ˜¯ï¼Ÿ</label>
        <div class="mood-selector" id="mood-selector">
            <div class="mood-item" onclick="selectMood(this, 'crying')">
                <span class="mood-emoji">ğŸ˜­</span>
                <span class="mood-label">å´©æ½°/éç†±</span>
            </div>
            <div class="mood-item" onclick="selectMood(this, 'meh')">
                <span class="mood-emoji">ğŸ˜</span>
                <span class="mood-label">å¹³æ·¡/å¾…æ©Ÿ</span>
            </div>
            <div class="mood-item" onclick="selectMood(this, 'good')">
                <span class="mood-emoji">ğŸ™‚</span>
                <span class="mood-label">é †æš¢/æ­£å¸¸</span>
            </div>
            <div class="mood-item" onclick="selectMood(this, 'zen')">
                <span class="mood-emoji">ğŸ§˜â€â™€ï¸</span>
                <span class="mood-label">ç†æ€§/å¿ƒæµ</span>
            </div>
        </div>

        <div class="review-card">
            <label class="review-label">âœ¨ Highlight (æˆå°±/å¥½äº‹)</label>
            <input type="text" id="review-highlight" class="review-input" placeholder="ä»Šå¤©å®Œæˆäº†ä¸€å€‹è¤‡é›œçš„åŠŸèƒ½...">
        </div>

        <div class="review-card">
            <label class="review-label">ğŸ”§ Debug (æƒ…ç·’/æ”¹é€²)</label>
            <textarea id="review-improve" class="review-input" rows="3" placeholder="ä»Šå¤©æœ‰å› ç‚ºä»€éº¼äº‹æƒ…ç”Ÿæ°£å—ï¼Ÿä¸‹æ¬¡å¯ä»¥æ€éº¼åšï¼Ÿ"></textarea>
        </div>

        <button onclick="submitReview()" class="btn btn-primary" style="padding: 15px;">
            <i class="fas fa-archive"></i> å°å­˜ä¸¦çµæŸä»Šæ—¥
        </button>
    </div>

    <div id="tab-gacha" class="tab-content">
        <div class="gacha-box">
            <div id="gacha-icon" class="gacha-icon"><i class="fas fa-gift"></i></div>
            <h2>å‘½é‹æŠ½ç±¤</h2>
            <p style="color:#666; margin-bottom: 30px;">
                å°ç¤¾äº¤æ„Ÿåˆ°ç„¦æ…®ï¼Ÿä¸çŸ¥é“è©²åšä»€éº¼ï¼Ÿ<br>è®“éš¨æ©Ÿæ•¸å¹«ä½ æ±ºå®šï¼Œé€™åªæ˜¯ä¸€å ´å¯¦é©—ã€‚
            </p>
            <button onclick="playGacha()" class="gacha-btn">é–‹å§‹æŠ½å–</button>
        </div>
    </div>

    <div id="tab-settings" class="tab-content">
        <div class="section-header">é•·æœŸç¿’æ…£ç®¡ç†</div>
        <div class="review-card">
            <div style="display:flex; gap:10px;">
                <input type="text" id="setting-input" class="review-input" placeholder="ä¾‹å¦‚ï¼šé–±è®€30åˆ†é˜">
                <button onclick="addRoutineTemplate()" class="btn btn-primary" style="width:auto;">æ–°å¢</button>
            </div>
            <ul id="settings-list" style="padding-left: 20px; margin-top: 15px;">
                </ul>
        </div>
        <button onclick="deployRoutines()" class="btn btn-primary">
            <i class="fas fa-sync"></i> é‡ç½®ä¸¦éƒ¨ç½²ä»Šæ—¥ç¿’æ…£
        </button>
    </div>
</div>

<nav class="bottom-nav">
    <div class="nav-item active" onclick="switchTab('dashboard')">
        <i class="fas fa-list"></i><span>å„€è¡¨æ¿</span>
    </div>
    <div class="nav-item" onclick="switchTab('gacha')">
        <i class="fas fa-dice-d20"></i><span>æŒ‘æˆ°</span>
    </div>
    <div class="nav-item" onclick="switchTab('review')">
        <i class="fas fa-pen-nib"></i><span>æª¢è¨</span>
    </div>
</nav>

<div id="cooldown-modal" class="modal-overlay">
    <div class="modal anger-mode">
        <h2 style="color: var(--danger); margin-top:0;">ğŸ”¥ ç³»çµ±éç†±è­¦å ±</h2>
        <p style="color:#666;">åµæ¸¬åˆ°æƒ…ç·’ç•°å¸¸ã€‚å¼·åˆ¶åŸ·è¡Œå†·å»ç¨‹åºã€‚</p>
        <div id="timer-display" class="timer-display">03:00</div>
        <textarea id="anger-log" class="review-input" placeholder="åœ¨æ­¤éš¨æ„å®£æ´©ï¼ˆä¸æœƒä¿å­˜ï¼Œæ‰“å®Œå³ç„šï¼‰..." rows="3"></textarea>
        <button id="cooldown-btn" onclick="stopCooldown()" class="btn btn-outline" style="width:100%; margin-top:15px;" disabled>
            æ­£åœ¨å†·å»ä¸­...
        </button>
    </div>
</div>

<div id="gacha-result-modal" class="modal-overlay">
    <div class="modal">
        <h2 id="gacha-title" style="color: var(--accent);"></h2>
        <p id="gacha-desc" style="line-height: 1.6; color:#555;"></p>
        <button onclick="acceptChallenge()" class="btn btn-primary">æ¥å—æŒ‘æˆ°</button>
        <button onclick="closeGacha()" class="btn btn-outline" style="margin-top:10px; width:100%">é—œé–‰</button>
    </div>
</div>

<script>
    /* --- 1. è³‡æ–™èˆ‡ç‹€æ…‹ç®¡ç† --- */
    let tasks = JSON.parse(localStorage.getItem('myTasks')) || [];
    let routines = JSON.parse(localStorage.getItem('myRoutines')) || ['é–±è®€æŠ€è¡“æ–‡ç« ', 'æ ¸å¿ƒé‹å‹• 10 åˆ†é˜'];
    let currentMood = '';

    // è½‰è›‹æ±  (çµåˆä½ çš„ç¤¾äº¤ç„¦æ…®ç·´ç¿’)
    const gachaPool = [
        { title: "ğŸ§ª Beta æ¸¬è©¦å“¡", desc: "åœ¨ç¤¾ç¾¤åˆ†äº«ä¸€é¦–ä½ å–œæ­¡çš„æ­Œã€‚å¿ƒæ…‹è¨­å®šï¼šé€™åªæ˜¯ A/B Testï¼Œæ²’äººé»è®šä»£è¡¨é€™çµ„æ•¸æ“šæ¨£æœ¬ä¸å°ï¼Œèˆ‡ä½ ç„¡é—œã€‚" },
        { title: "ğŸ¤· So What?", desc: "ç•¶ä½ æ“”å¿ƒåˆ¥äººçœ‹æ³•æ™‚ï¼Œé€£çºŒå•è‡ªå·±ä¸‰æ¬¡ã€Œæ‰€ä»¥å‘¢ï¼Ÿã€ã€‚æœƒæœ‰å¯¦è³ªæå¤±å—ï¼Ÿ" },
        { title: "ğŸ§¹ æ•¸ä½æƒé™¤", desc: "æ•´ç†æ¡Œé¢æˆ–åˆªé™¤æ‰‹æ©Ÿè£¡ 5 å¼µä¸éœ€è¦çš„ç…§ç‰‡ã€‚" },
        { title: "ğŸ’§ ç‰©ç†å†·å»", desc: "å»å–ä¸€æ¯å†°æ°´ï¼Œæˆ–è€…æ´—ä¸€æŠŠè‡‰ã€‚" },
        { title: "ğŸ§˜ å…©åˆ†é˜æš«åœ", desc: "ä»€éº¼éƒ½ä¸åšï¼Œç™¼å‘†å…©åˆ†é˜ã€‚" }
    ];
    let tempChallenge = null;

    /* --- 2. åˆå§‹åŒ–èˆ‡æ¸²æŸ“ --- */
    document.addEventListener('DOMContentLoaded', () => {
        renderTasks();
        renderSettings();
    });

    function switchTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        
        document.getElementById(`tab-${tabName}`).classList.add('active');
        
        // ç°¡å–®çš„ Nav Highlight é‚è¼¯
        const icons = {'dashboard':0, 'gacha':1, 'review':2};
        if(icons[tabName] !== undefined) {
            document.querySelectorAll('.nav-item')[icons[tabName]].classList.add('active');
        }
    }

    /* --- 3. ä»»å‹™é‚è¼¯ --- */
    function renderTasks() {
        const rList = document.getElementById('routine-list');
        const tList = document.getElementById('todo-list');
        rList.innerHTML = ''; tList.innerHTML = '';

        let completed = 0;
        
        tasks.forEach(task => {
            if(task.completed) completed++;
            
            const li = document.createElement('li');
            li.className = `task-item ${task.type} ${task.completed ? 'completed' : ''}`;
            li.innerHTML = `
                <input type="checkbox" ${task.completed ? 'checked' : ''} onchange="toggleTask('${task.id}')" style="transform:scale(1.3); margin-right:10px; cursor:pointer;">
                <div style="flex:1;">
                    ${task.tag ? `<span class="tag">${task.tag}</span>` : ''}
                    <span>${task.text}</span>
                </div>
                <i class="fas fa-times" onclick="deleteTask('${task.id}')" style="color:#ddd; cursor:pointer; padding:5px;"></i>
            `;
            
            if(task.type === 'routine') rList.appendChild(li);
            else tList.appendChild(li);
        });

        // Update Progress
        const percent = tasks.length ? Math.round((completed / tasks.length) * 100) : 0;
        document.getElementById('xp-bar').style.width = `${percent}%`;
        document.getElementById('xp-text').innerText = `ä»Šæ—¥é€²åº¦: ${completed}/${tasks.length} (${percent}%)`;
    }

    function addTask(text, type, tag='') {
        tasks.push({
            id: Date.now() + Math.random().toString(36).substr(2,5),
            text, type, tag, completed: false
        });
        save(); renderTasks();
    }

    function handleEnter(e) { if(e.key === 'Enter') addTodo(); }
    function addTodo() {
        const input = document.getElementById('quick-input');
        if(input.value.trim()) {
            addTask(input.value.trim(), 'todo');
            input.value = '';
        }
    }

    function toggleTask(id) {
        const t = tasks.find(x => x.id === id);
        if(t) t.completed = !t.completed;
        save(); renderTasks();
    }

    function deleteTask(id) {
        if(confirm('åˆªé™¤æ­¤ä»»å‹™ï¼Ÿ')) {
            tasks = tasks.filter(x => x.id !== id);
            save(); renderTasks();
        }
    }

    /* --- 4. è½‰è›‹ç³»çµ± --- */
    function playGacha() {
        const icon = document.getElementById('gacha-icon');
        icon.style.animation = 'none';
        icon.offsetHeight; /* trigger reflow */
        icon.style.animation = 'float 0.5s infinite'; /* Shake fast */
        
        setTimeout(() => {
            icon.style.animation = 'float 3s infinite ease-in-out';
            const item = gachaPool[Math.floor(Math.random() * gachaPool.length)];
            tempChallenge = item;
            
            document.getElementById('gacha-title').innerText = item.title;
            document.getElementById('gacha-desc').innerText = item.desc;
            document.getElementById('gacha-result-modal').style.display = 'flex';
        }, 800);
    }

    function acceptChallenge() {
        if(tempChallenge) {
            addTask(tempChallenge.title, 'challenge', 'Challenge');
            switchTab('dashboard');
            closeGacha();
        }
    }
    function closeGacha() { document.getElementById('gacha-result-modal').style.display = 'none'; }

    /* --- 5. æ¯æ—¥æª¢è¨ (Review) --- */
    function selectMood(el, mood) {
        document.querySelectorAll('.mood-item').forEach(i => i.classList.remove('selected'));
        el.classList.add('selected');
        currentMood = mood;
    }

    function submitReview() {
        const highlight = document.getElementById('review-highlight').value;
        const improve = document.getElementById('review-improve').value;
        
        if(!currentMood && !highlight && !improve) {
            alert("è«‹è‡³å°‘å¡«å¯«ä¸€é …æˆ–é¸æ“‡å¿ƒæƒ…"); return;
        }

        const log = {
            date: new Date().toLocaleDateString(),
            mood: currentMood,
            highlight,
            improve,
            completionRate: document.getElementById('xp-text').innerText
        };

        // é€™è£¡å¯ä»¥å­˜å…¥ localStorage çš„ log é™£åˆ—ï¼Œæˆ–å–®ç´”æ¸…ç©ºç•¶æ—¥
        console.log("Archived:", log);
        
        alert("ä»Šæ—¥å·²å°å­˜ï¼ç¶“é©—å€¼å·²å…¥å¸³ã€‚");
        
        // Reset Day
        tasks = tasks.filter(t => t.type === 'challenge'); // åªä¿ç•™æœªå®Œæˆçš„æŒ‘æˆ°ï¼Ÿæˆ–å…¨éƒ¨æ¸…ç©º
        // é€™è£¡é¸æ“‡ç°¡å–®é‚è¼¯ï¼šå…¨éƒ¨æ¸…ç©ºï¼Œåªç•™é•·æœŸç¿’æ…£ç­‰å¾…æ˜å¤©é‡ç½®
        tasks = [];
        
        document.getElementById('review-highlight').value = '';
        document.getElementById('review-improve').value = '';
        document.querySelectorAll('.mood-item').forEach(i => i.classList.remove('selected'));
        
        save(); renderTasks(); switchTab('dashboard');
    }

    /* --- 6. å†·éœæ¨¡å¼ (Cooldown) --- */
    let timerInterval;
    function startCooldown() {
        const modal = document.getElementById('cooldown-modal');
        const btn = document.getElementById('cooldown-btn');
        const display = document.getElementById('timer-display');
        document.getElementById('anger-log').value = ''; // Clear log

        modal.style.display = 'flex';
        btn.disabled = true;
        btn.innerText = "æ­£åœ¨å†·å»èˆ‡é‡æ§‹...";
        
        let seconds = 180; // 3åˆ†é˜
        
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            seconds--;
            const m = Math.floor(seconds / 60).toString().padStart(2,'0');
            const s = (seconds % 60).toString().padStart(2,'0');
            display.innerText = `${m}:${s}`;
            
            if(seconds <= 0) {
                clearInterval(timerInterval);
                btn.disabled = false;
                btn.innerText = "æˆ‘å·²æ¢å¾©ç†æ€§ (é›¢é–‹)";
                btn.classList.remove('btn-outline');
                btn.classList.add('btn-primary');
            }
        }, 1000);
    }
    
    function stopCooldown() {
        document.getElementById('cooldown-modal').style.display = 'none';
        clearInterval(timerInterval);
    }

    /* --- 7. è¨­å®šé é¢ (Settings) --- */
    function renderSettings() {
        const list = document.getElementById('settings-list');
        list.innerHTML = routines.map((r, i) => `
            <li style="margin-bottom:5px; font-size:0.9rem;">
                ${r} <span onclick="removeRoutine(${i})" style="color:red; cursor:pointer; margin-left:10px;">x</span>
            </li>
        `).join('');
    }

    function addRoutineTemplate() {
        const val = document.getElementById('setting-input').value.trim();
        if(val) {
            routines.push(val);
            localStorage.setItem('myRoutines', JSON.stringify(routines));
            document.getElementById('setting-input').value = '';
            renderSettings();
        }
    }

    function removeRoutine(idx) {
        routines.splice(idx, 1);
        localStorage.setItem('myRoutines', JSON.stringify(routines));
        renderSettings();
    }

    function deployRoutines() {
        // å°‡è¨­å®šçš„ç¿’æ…£åŠ å…¥ä»Šæ—¥ä»»å‹™
        routines.forEach(r => addTask(r, 'routine', 'Routine'));
        alert('å·²éƒ¨ç½²ä»Šæ—¥ä¿®ç…‰é …ç›®ï¼');
        switchTab('dashboard');
    }

    function save() { localStorage.setItem('myTasks', JSON.stringify(tasks)); }

</script>
</body>
</html>
